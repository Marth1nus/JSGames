<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine</title>
  <script>
    const valentineGame = {
      noCount: -1,

      onAnswer(event) {
        const button = event.target
        const answer = 
          button.classList.contains('yes') ? 'yes' :
          button.classList.contains('no' ) ? 'no'  :
          undefined
        const { yes, no, icon, question, icons, music } = this.dom
        if (answer === 'yes') {
          question.textContent = '‚ù§Ô∏è YAY ‚ù§Ô∏è'
          yes.parentNode.replaceChildren(`You said no ${this.noCount} times before saying yes XD`)
          this.noCount = 0
          music.yippee.play()
          let imageIndex = 0
          const imgs = [
            icons.flusteredPunch,
            icons.satisfiedDance,
            icons.loveHug,
            icons.blowingKissesAttack,
            icons.hugAttack,
            icons.handHoldPlease,
          ]
          const nextImage = async () => {
            this.dom.icon = imgs[imageIndex++] ?? imgs[imageIndex = 0]
            setTimeout(nextImage, 4000, )
          }
          nextImage()
          if (music.wiiSports.paused) {
            music.wiiSports.currentTime = 0
            music.wiiSports.volume = 0.5
            music.wiiSports.loop = true
            music.wiiSports.play()
            music.wiiShopping.pause()
          }
        }
        if (answer === 'no') {
          question.textContent = '‚ù§Ô∏è Will you be my Valentine? ‚ù§Ô∏è'
          yes.style.padding  = `2vmin ${2 + this.noCount}vmin 2vmin`
          const imgProgression = [
            icons.flusteredOnPhone,
            icons.confidentPlease,
            icons.flusteredTipToe,
            icons.handHoldPlease,
            icons.blowingKissesAttack,
            icons.disgustedConfused,
            icons.angryLookAway,
            icons.consolationHeadPat,
          ]
          const prevImg = icon.querySelector('img')
          const newImg = imgProgression[this.noCount++ / 3] ?? prevImg
          if (prevImg != newImg) {
            icon.replaceChildren(newImg)
            if (newImg === imgProgression.at(-1)) {
              music.hkCaterpillar.play()
            } else {
              music.oof.play()
            }
          }
          if (music.wiiShopping.paused) {
            music.wiiShopping.currentTime = 0
            music.wiiShopping.volume = 0.2
            music.wiiShopping.loop = true
            music.wiiShopping.play()
            music.wiiSports.pause()
          }
        }
      },

      dom: {
        set icon(value) { return this.icon.replaceChildren(value) },
        get yes     () { return document.querySelector('.yes             ') },
        get no      () { return document.querySelector('.no              ') },
        get icon    () { return document.querySelector('.question > .icon') },
        get question() { return document.querySelector('h1') },
        icons: {
          get flusteredOnPhone    () { return document.querySelector('.icon-img.flustered-on-phone   ').cloneNode(false) },
          get flusteredTipToe     () { return document.querySelector('.icon-img.flustered-tip-toe    ').cloneNode(false) },
          get loveHug             () { return document.querySelector('.icon-img.love-hug             ').cloneNode(false) },
          get blowingKissesAttack () { return document.querySelector('.icon-img.blowing-kisses-attack').cloneNode(false) },
          get hugAttack           () { return document.querySelector('.icon-img.hug-attack           ').cloneNode(false) },
          get consolationHeadPat  () { return document.querySelector('.icon-img.consolation-head-pat ').cloneNode(false) },
          get handHoldPlease      () { return document.querySelector('.icon-img.hand-hold-please     ').cloneNode(false) },
          get flusteredPunch      () { return document.querySelector('.icon-img.flustered-punch      ').cloneNode(false) },
          get satisfiedDance      () { return document.querySelector('.icon-img.satisfied-dance      ').cloneNode(false) },
          get disgustedConfused   () { return document.querySelector('.icon-img.disgusted-confused   ').cloneNode(false) },
          get confidentPlease     () { return document.querySelector('.icon-img.confident-please     ').cloneNode(false) },
          get angryLookAway       () { return document.querySelector('.icon-img.angry-look-away      ').cloneNode(false) },
        },
        music: {
          wiiShopping: new Audio('https://vgmsite.com/soundtracks/wii-music-collection/mqwcxcbzcc/07.%20Shop%20Channel.mp3'),
          wiiSports: new Audio('https://vgmsite.com/soundtracks/wii-music-collection/ganfxgskdk/08.%20Title%20%28Wii%20Sports%29.mp3'),
          yippee: new Audio('https://www.myinstants.com/media/sounds/yippee-meme-sound-effect.mp3'),
          oof: new Audio('https://www.myinstants.com/media/sounds/roblox-death-sound_1.mp3'),
          hkCaterpillar: new Audio('https://www.myinstants.com/media/sounds/caterpillar_hollow_knight.mp3'),
        }
      },
    }
  </script>
  <style>
    body {
      display: flex;
      justify-content: space-around;
      margin: 4vmin;
    }
    .question {
      outline: 1vmin solid pink;
      outline-style: double;
      padding: 2vmin;
      border-radius: 8vmin;
      font-size: 4vmin;
      font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      text-align: center;
    }

    .question > * {
      display: flex;
      justify-content: space-around;
    }

    .answer {
      display: none;
      display: inline-flex;
      padding: 2vmin;
      border-radius: 10vmin;
      border: 1px solid white;
      font-size: inherit;
      transition: all 0.1s ease-in-out;
      justify-content: center;
      margin: 2vmin;
    }

    .answer:hover {
      outline: 1vmin dotted pink;
    }

    .yes {
      background-color: pink;
    }

    .yes:hover {
      background-image: radial-gradient(red, pink, white, pink, red);
      transition: all 0.1s ease-in-out;
    }

    .no {
      background-color: red;
    }

    .no:hover {
      background-color: transparent;
      background-image: linear-gradient(transparent, red, transparent);
      margin-top: 10%;
      transition: all 0.1s ease-out;
    }

    img {
      height:50vmin
    }
  </style>
</head>
<body>
  <div id="hidden-resources" style="display: none;">
    <img class="icon-img flustered-on-phone"    alt="flustered-on-phone"    async src="https://media.tenor.com/PVJev3UoMzMAAAAi/uwu.gif" loading="lazy"/>
    <img class="icon-img flustered-tip-toe"     alt="flustered-tip-toe"     async src="https://media.tenor.com/hpgCwxnBaK8AAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img love-hug"              alt="love-hug"              async src="https://media.tenor.com/kgZnQRqOZqkAAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img blowing-kisses-attack" alt="blowing-kisses-attack" async src="https://media.tenor.com/o2iDlb2KAtIAAAAi/milk-mocha-bear-kisses.gif" loading="lazy"/>
    <img class="icon-img hug-attack"            alt="hug-attack"            async src="https://media.tenor.com/ICmg8MUfSg8AAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img consolation-head-pat"  alt="consolation-head-pat"  async src="https://media.tenor.com/hTFz1CU9ljcAAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img hand-hold-please"      alt="hand-hold-please"      async src="https://media.tenor.com/w8yxWaatwLIAAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img flustered-punch"       alt="flustered-punch"       async src="https://media.tenor.com/1CCNmtTzaSsAAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img satisfied-dance"       alt="satisfied-dance"       async src="https://media.tenor.com/O-tKN4NYQOsAAAAi/milk-mocha-dance.gif" loading="lazy"/>
    <img class="icon-img disgusted-confused"    alt="disgusted-confused"    async src="https://media.tenor.com/KJ-ArgsmXwgAAAAi/milk-mocha-confused-milk-mocha-bear.gif" loading="lazy"/>
    <img class="icon-img confident-please"      alt="confident-please"      async src="https://media.tenor.com/Idr_-NLOu8oAAAAi/milk-and-mocha.gif" loading="lazy"/>
    <img class="icon-img angry-look-away"       alt="angry-look-away"       async src="https://media.tenor.com/qF1cFP9WVN8AAAAi/milk-and-mocha-mad.gif" loading="lazy"/>
  </div>
  <main class="question">
    <h1>‚ù§Ô∏è Will you be my Valentine? ‚ù§Ô∏è</h1>
    <div class="icon"><script>valentineGame.dom.icon = valentineGame.dom.icons.confidentPlease</script></div>
    <span>
      <button class="answer yes" onclick="valentineGame.onAnswer(event)">üíû Yes üíò</button>
      <button class="answer no"  onclick="valentineGame.onAnswer(event)">üíî No  ‚ù§Ô∏è‚Äçü©π</button>
      <script>document.currentScript.parentElement.querySelector('.no').click()</script>
    </span>
  </main>
</body>
</html>